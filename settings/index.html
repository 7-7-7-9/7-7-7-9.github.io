<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-K8CCSDNPV3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-K8CCSDNPV3');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="US4">
    <meta property="og:description" content="Play unblocked games">
    <meta property="og:image" content="https://raw.githubusercontent.com/US4-UBG/US4-UBG.github.io/refs/heads/main/logo.png">
    <meta name="keywords" content="Unblocked Sites 4, school, slope, geometry, google classroom, college, football, rugby, US4, unblocked games, snowrider, boxing, soccer, volleyball, run 3, subway surfers, paperio, ovo, cluster rush, boxing random, volley random, soccer random, basket random">
    <title>US4 - Settings</title>
    <link rel="icon" href="https://raw.githubusercontent.com/voucan/voucan.github.io/refs/heads/main/googleclassroom.png" type="image/png">
    <link rel="stylesheet" href="/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: url('/bg.gif') repeat center center fixed;
            background-size: 100%;
            font-family: Arial, sans-serif;
            margin: 0;
            color: white;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background-color: #000;
            color: white;
        }
        .logo-text img {
            height: 40px;
            margin-right: 10px;
        }
        .nav-buttons a {
            color: white;
            margin-left: 15px;
            text-decoration: none;
        }
        .settings-container {
            padding: 20px;
            text-align: center;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            margin: 50px auto;
            max-width: 400px;
            box-sizing: border-box;
        }
        .settings-container h1 {
            color: gold;
        }
        .settings-container label {
            display: block;
            margin: 10px 0;
        }
        .settings-container input[type="text"], .settings-container input[type="file"] {
            padding: 10px;
            width: 100%;
            margin: 5px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .settings-container button {
            padding: 10px;
            margin-top: 10px;
            background-color: #333;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        .settings-container button:hover {
            background-color: #555;
        }
        .reset-button {
            margin-top: 20px;
            background-color: red;
        }
        .reset-button:hover {
            background-color: darkred;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo-text">
            <img src="https://raw.githubusercontent.com/US4-UBG/US4-UBG.github.io/refs/heads/main/logo.png" alt="Logo">
            <a href="/">US4</a>
        </div>
        <div class="nav-buttons">
            <script type="text/javascript" src="/nav-bars/nav-settings.js"></script>
        </div>
    </div>

    <div class="settings-container">
        <h1>Settings</h1>

        <label for="beforeUnloadToggle">Enable Anti-Close:</label>
        <input type="checkbox" id="beforeUnloadToggle" />

        <hr>

        <label for="siteTitle">Set Site Title:</label>
        <input type="text" id="siteTitle" placeholder="Enter site title" />

        <label for="siteLogo">Set Site Favicon:</label>
        <input type="file" id="siteLogo" accept="image/*" />

        <button id="saveSettings">Save Title & Favicon</button>

        <hr>

        <label for="panicKey">Set Panic Button Key:</label>
        <input type="text" id="panicKey" placeholder="Enter key (e.g., F1)" />

        <label for="panicUrl">Set Panic Button URL:</label>
        <input type="text" id="panicUrl" placeholder="Enter URL to redirect to" />

        <button id="savePanicButtonSettings">Save Panic Button Settings</button>

        <hr>

        <button id="resetSettings" class="reset-button">Reset Tab Name and Icon</button>
        <button id="resetPanicButtonSettings" class="reset-button">Reset Panic Button Settings</button>
    </div>

    <script>
        const beforeUnloadToggle = document.getElementById('beforeUnloadToggle');
        const siteTitleInput = document.getElementById('siteTitle');
        const siteLogoInput = document.getElementById('siteLogo');
        const panicKeyInput = document.getElementById('panicKey');
        const panicUrlInput = document.getElementById('panicUrl');
        const saveSettingsButton = document.getElementById('saveSettings');
        const savePanicButtonSettingsButton = document.getElementById('savePanicButtonSettings');
        const resetSettingsButton = document.getElementById('resetSettings');
        const resetPanicButtonSettingsButton = document.getElementById('resetPanicButtonSettings');

        beforeUnloadToggle.checked = localStorage.getItem('beforeUnloadEnabled') === 'true';
        siteTitleInput.value = localStorage.getItem('siteTitle') || '';
        panicKeyInput.value = localStorage.getItem('panicKey') || '';
        panicUrlInput.value = localStorage.getItem('panicUrl') || '';
        
        const savedLogo = localStorage.getItem('siteLogo');
        if (savedLogo) {
            const faviconLink = document.createElement('link');
            faviconLink.rel = 'icon';
            faviconLink.href = savedLogo;
            document.head.appendChild(faviconLink);
        }

        saveSettingsButton.addEventListener('click', function() {
            const siteTitle = siteTitleInput.value;
            const siteLogoFile = siteLogoInput.files[0];

            if (siteTitle) {
                localStorage.setItem('siteTitle', siteTitle);
            }

            if (siteLogoFile) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const logoUrl = event.target.result;
                    localStorage.setItem('siteLogo', logoUrl);
                    const faviconLink = document.createElement('link');
                    faviconLink.rel = 'icon';
                    faviconLink.href = logoUrl;
                    document.head.appendChild(faviconLink);
                };
                reader.readAsDataURL(siteLogoFile);
            }
        });

        savePanicButtonSettingsButton.addEventListener('click', function() {
            const panicKey = panicKeyInput.value;
            const panicUrl = panicUrlInput.value;

            if (panicKey) {
                localStorage.setItem('panicKey', panicKey);
            }

            if (panicUrl) {
                localStorage.setItem('panicUrl', panicUrl);
            }
        });

        resetSettingsButton.addEventListener('click', function() {
            localStorage.removeItem('siteTitle');
            localStorage.removeItem('siteLogo');
            document.title = 'US4 - Settings';
            const defaultFaviconLink = document.querySelector('link[rel="icon"]');
            if (defaultFaviconLink) {
                defaultFaviconLink.href = 'https://raw.githubusercontent.com/voucan/voucan.github.io/refs/heads/main/googleclassroom.png';
            }
        });

        resetPanicButtonSettingsButton.addEventListener('click', function() {
            localStorage.removeItem('panicKey');
            localStorage.removeItem('panicUrl');
        });

        if (beforeUnloadToggle.checked) {
            window.addEventListener('beforeunload', function(e) {
                e.preventDefault();
                e.returnValue = '';
            });
        }

        window.addEventListener('keydown', function(event) {
            const panicKey = localStorage.getItem('panicKey');
            const panicUrl = localStorage.getItem('panicUrl');

            if (event.key === panicKey && panicUrl) {
                window.location.href = panicUrl;
            }
        });
    </script>
</body>
</html>
